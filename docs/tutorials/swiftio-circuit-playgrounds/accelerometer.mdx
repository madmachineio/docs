---
title: Movement sensing using accelerometer
description: Learn how to 
---

# Movement sensing using accelerometer 

Letâ€™s measure the movement of the object.

You may not have heard of accelerometers, but you must experience them in everyday life. For example, when you rotate your mobile phone, you may find the screen display rotate portrait to landscape. Actually, it's due to the accelerometer inside the phone. It senses the movement and then responds to it accordingly. Now letâ€™s take a closer look at it.

**Learning goals**

* Understand how an accelerometer senses movements.
* Know about acceleration. 

## ðŸ”¸New component

### Accelerometer

The accelerometer, aka 3-axis accelerometer, is used to measure the acceleration on 3 axis: x, y, z-axis. The acceleration describes the change of velocity with time. 

<img
  src={require('./img/accelerometer.png').default}
  alt="Accelerometer" width="320"
/>

To better understand how the accelerometer works, letâ€™s imagine a small ball inside a vacuum box. Here are some situations: 

* There is no gravity or any other factor that might affect the position of the ball. So the ball will float in the middle. 
* If you suddenly move the box to the left, the ball will move in the opposite direction and a force will be applied to that wall. This is like the experience when you take a bus. If the bus suddenly speeds up, your body feels a force backward and then moves backward. This force is known as inertial force. 
* If the box isn't vacuum, the ball will fall down due to gravity. 

<img
  src={require('./img/ballinbox.png').default}
  alt="A ball in box to show the acceleration" width="960"
/>
              
The accelerometer measures the acceleration by detecting the force. It could sense the gravity and measure the vibration or movement. The force caused by gravity or acceleration would change the internal capacitance of the sensor and thus change the voltage in the circuit.

Now letâ€™s see several examples to better understand it.

* If the sensor is still, it will only feel the gravity. When the sensor faces up on the table, it will get a force downwards on the z-axis; when the sensor is perpendicular to the table as in the second image, there will be a force on the y-axis. No matter it is at any angle, the gravity on it could be broken down into 3 axes. 

<img
  src={require('./img/accelerometerDirection.png').default}
  alt="Accelerometer in three directions" width="960"
/>

* If the sensor moves toward a certain direction, there will always be a corresponding inertial force and the gravity force.

<img
  src={require('./img/mems.png').default}
  alt="mems" width="960"
/>

The acceleration has magnitude and direction. It could be positive or negative. Itâ€™s measured in meters per second squared (m/s2). The gravitational acceleration on earth equals 1g (9.8m/s2). 

The accelerometer you are going to use supports I2C communication. The data it sends on the bus is a raw value. The value ranges from -32768 to 32767 (16-bit). Then the value could also be converted to the acceleration value proportionally according to the measurement range. The sensor provides several measurement ranges: Â±2g, Â±4g, Â±8g, Â±16g. If you choose Â±2g, -32768 equals -2g and 32768 equals 2g. 

## ðŸ”¸Circuit - accelerometer module
The accelerometer module is connected to **I2C0**.

<img
  src={require('./img/accelerometerCircuit.png').default}
  alt="Accelerometer circuit" width="960"
/>

<img
  src={require('./img/accelerometerCircuitDiagram.png').default}
  alt="Accelerometer circuit diagram" width="360"
/>

:::note
The circuits above are simplified versions for your reference.
:::

## ðŸ”¸Preparation

**Class**

**`LIS3DH`** - it provides predefined methods for you to communicate with the sensor in an easy way.

| Method | Explanation |
| ------ | ----------- |
| `init()` | Initialize the sensor to start the communication. It needs the I2C interface. The address has a default value. |
| `readXYZ()` | Read the acceleration on three axes. It will return three values in float. |

## ðŸ”¸Exercise
1. Read acceleration 

### 1. Read acceleration
Letâ€™s use the sensor to know how the movement is. You move or tilt the sensor in different directions, and the corresponding values printed on the window change

**Example code**
```swift
// Import SwiftIO and SwiftIOFeather library. Import LIS3DH to read the value from the sensor.
import SwiftIO
import SwiftIOFeather
import LIS3DH

// Initialize the I2C pins and the sensor.
let i2c = I2C(Id.I2C0)
let acc = LIS3DH(i2c)

// Read the accelerations and each of them.
while true {
    let value = acc.readXYZ()
    print("x: \(value.x)g")
    print("y: \(value.y)g")
    print("z: \(value.z)g")
    print("\n")
    sleep(ms: 1000)
}
```
